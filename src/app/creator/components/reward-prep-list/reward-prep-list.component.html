<div class="row top-margin">
  <div class="col-12" *ngIf="vault && vault.rewardPrep">
    <a class="btn btn-lg btn-info btn-block"
      [routerLink]="['/rewardprep/new',vault.key]">
      <span>Create Reward Prep</span>
    </a>
  </div>
</div>
<div class="row" *ngIf="rewardprep && vault.rewardPrep">
    <div class="col-12">
        <ngx-datatable
        class="bootstrap"
        [columnMode]="'force'"
        [rows]="rewardprep"
        [limit]="25"
        [rowHeight]="'auto'"
        [columns]="prepColumns"
        [selected]="prepSelected"
        [selectionType]="'single'"
        (activate)="onPrepActivate($event)"
        (select)='onPrepSelect($event)'>
        >
        
          <ngx-datatable-column name="Name"></ngx-datatable-column>
          <ngx-datatable-column name="Vault">
              <ng-template ngx-datatable-cell-template let-value="value" let-isSelected="isSelected">
                  {{vaultName(value)}}
                </ng-template>
            </ngx-datatable-column>     
            <ngx-datatable-column name="Transfer" [width]="60" [sortable]="false" [canAutoResize]="false" [draggable]="false" [resizeable]="false">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                  <button
                    title="Transfer prepared rewards to Party Treasury"
                    class="btn btn-primary btn-sm"
                    (click)="applyPrep(row)">
                    <i class="fas fa-sign-in-alt"></i>
                  </button>                    
                </ng-template>
              </ngx-datatable-column>    
            <ngx-datatable-column name="Edit" [width]="60" [sortable]="false" [canAutoResize]="false" [draggable]="false" [resizeable]="false">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                  <button
                    class="btn btn-info btn-sm"
                    (click)="editPrep(row)">
                    <i class="far fa-edit"></i>
                  </button>
                </ng-template>
              </ngx-datatable-column>
              <ngx-datatable-column name="Delete" [width]="60" [sortable]="false" [canAutoResize]="false" [draggable]="false" [resizeable]="false">
                <ng-template ngx-datatable-cell-template let-rowIndex="rowIndex" let-row="row" let-value="value">
                  <button
                    class="btn btn-danger btn-sm"
                    (click)="deletePrep(row)">
                    <i class="far fa-trash-alt"></i>
                  </button>                    
                </ng-template>
              </ngx-datatable-column>     
        </ngx-datatable>
  </div>
</div>